---
title: "원하는 출력 결과에 맞춰 연산자와 괄호 활용하기"
date: 2026-02-13 00:19:00 +0900
categories: [Tech, SQL]
tags: [SQL]
---

## 컴퓨터는 사용자의 의도를 모른다: 논리 연산자 우선순위의 함정
SQL을 작성할 때 자칫 문장의 흐름대로 왼쪽에서 오른쪽으로 쿼리 결과가 나올 것이라 착각하기 쉽다.  
하지만 SQL 엔진은 엄격한 다음의 우선순위에 따라 움직인다.  
<br>
>_비교 연산자(=, >, <$) >>> NOT >>> AND >>> OR 순으로 실행_  
<br>

![연산자 우선순위](/assets/img/sql_1-1.PNG)

이렇게 괄호를 사용 안하고 쿼리문을 작성하면, 컴퓨터는 AND를 먼저 묶어버린다.  
<br>
컴퓨터의 해석: (커미션이 0이다) 또는 (커미션이 NULL이면서 급여가 3000 이상이다)  
사용자의 의도: (커미션이 0이거나 NULL인 사람) 중에서 (급여가 3000 이상인 사람)  

<hr style="height: 5px; background-color: #777; border: none;">

## 단순히 오류가 안 난다는 것이 가장 위험하다: 문법 오류 없이 발생하는 논리 오류의 위험
이렇게 위의 예시처럼 문법 오류(Syntax Error)는 없지만 논리 오류(Logical Error)가 발생할 수 있다는 점에 유의해야 한다.  
이러한 논리 오류를 제대로 점검하지 않는다면, 다음과 같은 문제가 발생할 수 있다.  
<br>
데이터의 오염: 잘못된 조건으로 추출된 데이터를 보고 보고서를 쓰면 의사결정 자체가 틀어진다.  
검증의 어려움: 에러 메시지가 뜨지 않기 때문에, 결과 행(Row) 수가 수만 건이 넘어가면 내가 원하는 데이터만 뽑혔는지 육안으로 확인이 불가능하다.  
<br>
그렇다고 무조건 괄호를 감싸는 습관을 갖으라거나 우선순위를 암기하라는 것은 아니다.  
>핵심은 AND와 OR이 섞일 때는 사용자의 의도를 명확히 하기 위해 괄호를 적절히 사용해야 한다는 것이다.  
<br>

```sql
-- 나쁜 예: 한 줄로 쭉 쓰기
WHERE COMM = 0 OR COMM IS NULL AND SAL >= 3000 

-- 좋은 예: 논리 구조가 보이게 작성
WHERE (
      COMM = 0 
      OR COMM IS NULL
      )
  AND SAL >= 3000
```

>이렇게 위쪽의 코드처럼 적절한 괄호 사용과 함께 논리 구조가 보이게 들여쓰기를 활용하는 습관을 들이자.  
<br>
<br>

![연산자 우선순위](/assets/img/sql_1-2.PNG)

그래서 이제 위쪽 사진의 쿼리문처럼 수정하면 비로소 사용자의 의도에 맞게 결과가 조회된다.

<hr style="height: 5px; background-color: #777; border: none;">

## [SUMMARY]
1. 우선순위의 함정: AND가 OR보다 먼저 실행된다. 사용자의 의도와 다르게 묶일 수 있다는 걸 명심하자.  
2. 괄호는 필수: 논리 연산자가 2개 이상 섞인다면 고민하지 말고 괄호를 치자. 괄호는 가장 강력한 우선순위가 된다.
3. 논리 구조: 쿼리를 작성할 때, 논리 구조가 보이게 작성하도록 하자.
4. 논리 오류 주의: 에러 메시지가 안 뜬다고 안심하지 말자. 틀린 데이터가 나오는 게 진짜 에러이다.
