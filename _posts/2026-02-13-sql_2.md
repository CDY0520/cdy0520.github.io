---
title: "데이터 타입 일치시키기"
date: 2026-02-13 23:034:00 +0900
categories: [Tech, SQL]
tags: [SQL]
---

## 데이터 타입 일치, 왜 꼼꼼하게 따져야 할까?

![데이터 타입 일치](/assets/img/sql_2-1.PNG)

위 사진을 보면 쿼리에서 NVL 함수를 활용해서 mgr 컬럼이 null값이면 "NO Manager"를 기입하라고 했다가 에러가 발생했다.  
해당 컬럼은 숫자형 데이터 타입인데, 여기에 값으로 숫자가 아니라 문자열을 넣으려고 했기 때문이다.
<br>
>이는 하나의 데이터 타입 컬럼에는 반드시 동일한 데이터 타입만을 사용해야 한다는 SQL의 대원칙 때문이다.
<br>
<br>

![데이터 타입 일치](/assets/img/sql_2-2.PNG)

때문에 해당 컬럼의 데이터 유형을 전부 문자열로 변환해서 통일해 주면 원하는 값을 에러없이 넣을 수 있다.  
이렇게 위쪽 사진처럼 TO_CHAR 함수를 사용하여 명시적으로 형변환을 통해 해결한다.
<br>
<br>

![데이터 타입 일치](/assets/img/sql_2-3.PNG)

또다른 방법으로는 CASE 구문을 활용해서도 데이터 유형 통일이 가능하다.

<hr style="height: 5px; background-color: #777; border: none;">

## 한 걸음 더: 에러만 고치면 끝일까?
일단은 단순히 에러를 해결하기 위해 TO_CHAR, CASE 등을 사용했지만,  
그럼 나중에 문자형으로 바뀐 숫자 사용하려면? 또 전체 데이터유형 바꿔?  
그럼 또 거기 안에 든 문자형 때문에 오류나고 반복일텐데...  
이런 생각이 들고나서 더 생각하다가 우선은 다음과 같이 정리가 되었다.  
<br>
만약 계산이 필요한 데이터인가? 그렇다면 타입 변경 대신 조회 시에만 변환해야 한다.    
혹은 표시의 문제인가? 그렇다면 DB보다는 프론트엔드/백엔드 로직에서 처리하는 게 더 깔끔할 수 있다.  
<br>

>**결국 중요한 것은 내 쿼리 하나가 데이터 전체의 성격에 어떤 영향을 줄지 고민하는 '설계자적 관점'이라고 생각한다.**

<hr style="height: 5px; background-color: #777; border: none;">

## 데이터 타입 변경 전, 고려해야 할 3가지
이렇게 숫자가 섞여있는 데이터 내용을 문자형 데이터 타입으로 변환하는 것은 주의가 필요하다.  
왜냐하면 해당 데이터를 활용해 연산할 수 있는 숫자형 데이터 타입의 성격이 없어진다!  
<br>

### 1) 출력할 때만 변환하기
본 데이터 타입은 유지하면서 조회 시점에만 문자열로 바꾸는 방식이다.  
이렇게하면 숫자의 데이터 성격은 그대로이기 때문에 계산 연산이 필요할 때 언제든 숫자로 쓸 수 있게된다.
<br>

즉, 데이터는 저장된 형태 그대로 두고 사용자에게 보여주는 방식만 가공하는 것이다.
<br>

### 2) NULL 처리의 미학
애초에 DB 설계 단계에서 NULL이 들어오지 않게 기본값(Default)을 설정하거나,  
숫자를 활용해 코드화하여 관리하는 것이 타입 혼란을 줄이는 방법이다.
<br>

혹은 위 예시처럼 숫자 데이터 유형 컬럼에 'NO Manager'라는 문자열을 굳이 데이터베이스 결과값에 섞어야 하는지 다시 생각해보자.  
쿼리에서는 그냥 NULL로 던져주고, 화면(Java, Python 등)에서 "관리자 없음"으로 표시하게 처리하는 방법도 있다.  
DB는 데이터 저장과 무결성에 집중하고, 문자열 가공은 애플리케이션 단에 맡겨 DB의 부하를 줄이는 전략이다.
<br>

### 3) 컬럼 타입 변경: 최후의 수단
실제로 해당 데이터가 숫자로서의 가치(더하기, 빼기 등)가 전혀 없고, 앞으로도 계속 문자가 섞일 가능성이 높다면 그때 타입을 바꾸기를 고려해본다.  
TO_CHAR, TO_NUMBER 함수를 활용한 명시적 형변환을 귀찮아하지 말도록 하자.  
데이터베이스가 알아서 해주겠지라는 믿음은 성능 저하의 시작이된다. 내 의도를 코드로 명확히 박아두는 것이 핵심이다.
<br>

하지만, 이미 서비스 중인 테이블이라면 타입을 바꾸는 순간 그 컬럼을 쓰고 있는 모든 소스 코드를 다 수정해야 한다.  
때문에 컬럼의 데이터 타입 변환에 신중하도록 하자.
<br>

<hr style="height: 5px; background-color: #777; border: none;">

## [SUMMARY]
1. 원칙 유지: 컬럼 타입 변경은 신중해야 한다. 타입은 데이터의 본질이기 때문이다.
2. 유연한 대처: 계산이 필요 없는 단순 표시용이라면 TO_CHAR나 CASE를 활용한 명시적 형변환이 가장 안전한 타협점일 수 있다.
3. 데이터 정합성: 예외값이 자주 발생한다면, 애초에 설계 단계에서 이 데이터를 어떻게 처리할지(Default값 설정 등) 팀과 논의가 필요하겠다.
